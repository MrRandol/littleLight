import React from 'react';

// Internal
import { LLException } from '../errorHandler';
import * as Message from '../message';
import * as Request from './request';
import * as Store from '../store/manifest';
import * as BUNGIE from './static';

var _ = require('underscore');

export function getItemBucketDefinitions(statusCallback) {
  try {
    statusCallback.call(this, {status: "IN_PROGRESS", message: "fetchBuckets"});
    Store.getManifestItemBuckets()
    .then(function (buckets) {
      statusCallback.call(this, {status: "SUCCESS", message: "bucketsRetreived", data: buckets});
    })
    .catch(function(error) {
      Message.error("[INVENTORY] Error while fetching bucket data from store.");
      Message.error(error);
      throw new LLException(40, error, 'inventoryException')
    });
  } catch (error) {
    Message.error("[INVENTORY] Error while fetching bucket data from store.");
    Message.error(error);
    throw new LLException(41, error, 'inventoryException')
  }
}

export async function getAllItemsAndCharacters(membership, statusCallback) {
  try {
    var membershipType = membership.membershipType;
    var destinyMembershipId = membership.membershipId;
    statusCallback.call(this, {status: "IN_PROGRESS", message: "fetchItems"});

    var query_params = 'components=profileInventories,CharacterInventories,CharacterEquipment,Characters,ItemInstances';
    var url = BUNGIE.HOST + 'Platform/Destiny2/' + membershipType + '/Profile/' + destinyMembershipId + '/?' + query_params; 

    var jsonResp = Request.doGet(url);
    /* var jsonResp = JSON.parse('{"ErrorCode":1,"ErrorStatus":"Success","Message":"Ok","MessageData":{},"Response":{"characterEquipment":{"data":{"2305843009266804469":{"items":[{"bindStatus":0,"bucketHash":1498876634,"itemHash":1048266744,"itemInstanceId":"6917529031370823803","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":2465295065,"itemHash":3860697508,"itemInstanceId":"6917529033464457087","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":953998645,"itemHash":1180270693,"itemInstanceId":"6917529030577924539","location":1,"lockable":true,"quantity":1,"state":1,"transferStatus":1},{"bindStatus":0,"bucketHash":3448274439,"itemHash":993844472,"itemInstanceId":"6917529032195392652","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":3551918588,"itemHash":1862800747,"itemInstanceId":"6917529029860253747","location":1,"lockable":true,"quantity":1,"state":1,"transferStatus":1},{"bindStatus":0,"bucketHash":14239492,"itemHash":410671183,"itemInstanceId":"6917529031400691391","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":20886954,"itemHash":1749589787,"itemInstanceId":"6917529032625051380","location":1,"lockable":true,"quantity":1,"state":1,"transferStatus":1},{"bindStatus":0,"bucketHash":1585787867,"itemHash":2082184158,"itemInstanceId":"6917529031920392973","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":4023194814,"itemHash":997920961,"itemInstanceId":"6917529030577928259","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":2025709351,"itemHash":3889183912,"itemInstanceId":"6917529032621538957","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":284967655,"itemHash":838210457,"itemInstanceId":"6917529030460591676","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":3284755031,"itemHash":1751782730,"itemInstanceId":"6917529030598087096","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":4292445962,"itemHash":1460578929,"itemInstanceId":"6917529030458105822","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":4274335291,"itemHash":1409726988,"itemInstanceId":"6917529030595651415","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":3054419239,"itemHash":292778444,"itemInstanceId":"6917529030917392754","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":1269569095,"itemHash":3282648591,"itemInstanceId":"6917529033390767668","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":3}]},"2305843009276930078":{"items":[{"bindStatus":0,"bucketHash":1498876634,"itemHash":653875712,"itemInstanceId":"6917529033496216189","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":2465295065,"itemHash":2694044463,"itemInstanceId":"6917529033496214860","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":953998645,"itemHash":2605790032,"itemInstanceId":"6917529033498990064","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":3448274439,"itemHash":1824298413,"itemInstanceId":"6917529033496213620","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":3551918588,"itemHash":2476964124,"itemInstanceId":"6917529033486456582","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":14239492,"itemHash":3790903614,"itemInstanceId":"6917529033490012016","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":20886954,"itemHash":1479892134,"itemInstanceId":"6917529033483704321","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":1585787867,"itemHash":3544884935,"itemInstanceId":"6917529033483707395","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":4023194814,"itemHash":4135938409,"itemInstanceId":"6917529032910904259","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":2025709351,"itemHash":904825092,"itemInstanceId":"6917529031073554499","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":284967655,"itemHash":1906867029,"itemInstanceId":"6917529032914358776","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":1},{"bindStatus":0,"bucketHash":3284755031,"itemHash":3635991036,"itemInstanceId":"6917529032945166786","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":4292445962,"itemHash":1460578929,"itemInstanceId":"6917529032945169281","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":4274335291,"itemHash":1907674138,"itemInstanceId":"6917529032897178219","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":3054419239,"itemHash":204918711,"itemInstanceId":"6917529033470923766","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":3},{"bindStatus":0,"bucketHash":1269569095,"itemHash":3282648591,"itemInstanceId":"6917529033380870637","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":3}]}},"privacy":1},"characterInventories":{"data":{"2305843009266804469":{"items":[{"bindStatus":0,"bucketHash":1498876634,"itemHash":3628991659,"itemInstanceId":"6917529031364326780","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1498876634,"itemHash":1331482397,"itemInstanceId":"6917529032179600705","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1498876634,"itemHash":1706536806,"itemInstanceId":"6917529032780817021","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1498876634,"itemHash":196262242,"itemInstanceId":"6917529033470930978","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1498876634,"itemHash":1982646204,"itemInstanceId":"6917529032421009158","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1498876634,"itemHash":1513927138,"itemInstanceId":"6917529032466693537","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":2700862858,"itemInstanceId":"6917529033470930274","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":925326392,"itemInstanceId":"6917529031306795363","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":3089417788,"itemInstanceId":"6917529030899106824","location":1,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":2362471600,"itemInstanceId":"6917529033258954291","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":4255268456,"itemInstanceId":"6917529032459537185","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":2907129557,"itemInstanceId":"6917529032410489115","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":4190156464,"itemInstanceId":"6917529031927800497","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":417474224,"itemInstanceId":"6917529033264059172","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":3005212482,"itemInstanceId":"6917529031850128260","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":953998645,"itemHash":3141979347,"itemInstanceId":"6917529031895802336","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":3748713778,"itemInstanceId":"6917529033464452429","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":1325579289,"itemInstanceId":"6917529032466698337","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3448274439,"itemHash":2811180959,"itemInstanceId":"6917529030935116680","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3551918588,"itemHash":1457647945,"itemInstanceId":"6917529032784336606","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3551918588,"itemHash":3794819064,"itemInstanceId":"6917529030136995041","location":1,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":3551918588,"itemHash":489114030,"itemInstanceId":"6917529033455258652","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3551918588,"itemHash":3169402598,"itemInstanceId":"6917529032421002534","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":14239492,"itemHash":1333087155,"itemInstanceId":"6917529032192081173","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":14239492,"itemHash":2724176749,"itemInstanceId":"6917529030136994796","location":1,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":20886954,"itemHash":1664611474,"itemInstanceId":"6917529032403453779","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":20886954,"itemHash":2954558332,"itemInstanceId":"6917529031101894041","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1585787867,"itemHash":4285708584,"itemInstanceId":"6917529031846759552","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":4023194814,"itemHash":4135938410,"itemInstanceId":"6917529029501326294","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":4023194814,"itemHash":261110030,"itemInstanceId":"6917529029940911199","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":4023194814,"itemHash":2833999148,"itemInstanceId":"6917529030665750022","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2025709351,"itemHash":904825092,"itemInstanceId":"6917529030883254396","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":284967655,"itemHash":1906867029,"itemInstanceId":"6917529029491319675","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":284967655,"itemHash":2503134032,"itemInstanceId":"6917529031344224983","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":284967655,"itemHash":2503134037,"itemInstanceId":"6917529032195396637","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3284755031,"itemHash":3481861797,"itemInstanceId":"6917529029501327596","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3284755031,"itemHash":3887892656,"itemInstanceId":"6917529030111373627","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":497170007,"itemHash":432848324,"location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":444348033,"itemHash":2540008660,"location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":1907674137,"itemInstanceId":"6917529029455460308","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":1940590816,"itemInstanceId":"6917529029486385746","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":4242592192,"itemInstanceId":"6917529032466699534","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":3010885351,"itemInstanceId":"6917529029780120309","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":1530147650,"itemInstanceId":"6917529029885412905","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":46275857,"itemInstanceId":"6917529030101194307","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":4274335291,"itemHash":3564452901,"itemInstanceId":"6917529030577930550","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3054419239,"itemHash":3400316022,"itemInstanceId":"6917529029450350536","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3054419239,"itemHash":4072587059,"itemInstanceId":"6917529029491320624","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3054419239,"itemHash":454583975,"itemInstanceId":"6917529030134411823","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3054419239,"itemHash":204918711,"itemInstanceId":"6917529032189809646","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":4226000705,"itemInstanceId":"6917529033656749484","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":1692367908,"itemInstanceId":"6917529033390766050","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":1060100991,"itemInstanceId":"6917529033390767793","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":1765393780,"itemInstanceId":"6917529033390767794","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":2158062501,"itemInstanceId":"6917529033390767795","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":2089806059,"itemInstanceId":"6917529033390767669","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":4010781267,"itemInstanceId":"6917529031611065251","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":2422292810,"itemHash":2576899547,"location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2}]},"2305843009276930078":{"items":[{"bindStatus":0,"bucketHash":1498876634,"itemHash":653875712,"itemInstanceId":"6917529033490017610","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1498876634,"itemHash":2860172150,"itemInstanceId":"6917529033490014894","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":1281822859,"itemInstanceId":"6917529033498991502","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2465295065,"itemHash":3089417789,"itemInstanceId":"6917529032948321900","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":1177293325,"itemInstanceId":"6917529033470927000","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":1393021133,"itemInstanceId":"6917529033486459500","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":953998645,"itemHash":1995011459,"itemInstanceId":"6917529033470928474","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":4023194814,"itemHash":4135938410,"itemInstanceId":"6917529032914352120","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3284755031,"itemHash":1334959255,"itemInstanceId":"6917529032914361280","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3284755031,"itemHash":2617788016,"itemInstanceId":"6917529033490020908","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":497170007,"itemHash":432848324,"location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":444348033,"itemHash":2540008660,"location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":2689798304,"itemHash":529424730,"location":1,"lockable":false,"quantity":2,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3054419239,"itemHash":3400316022,"itemInstanceId":"6917529032900346251","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":3054419239,"itemHash":454583975,"itemInstanceId":"6917529033470921879","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":3356597058,"itemInstanceId":"6917529033496213123","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":2892535447,"itemInstanceId":"6917529032914356792","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":1041160127,"itemInstanceId":"6917529032955574852","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":3253223475,"itemInstanceId":"6917529032958975438","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":1801258597,"itemHash":2017943043,"itemInstanceId":"6917529033483708979","location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2},{"bindStatus":0,"bucketHash":215593132,"itemHash":246765359,"itemInstanceId":"6917529033483709492","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":215593132,"itemHash":1169595348,"itemInstanceId":"6917529033483711514","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":215593132,"itemHash":2860172149,"itemInstanceId":"6917529033455252337","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":215593132,"itemHash":653875713,"itemInstanceId":"6917529033486459946","location":1,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2422292810,"itemHash":1598687622,"location":1,"lockable":false,"quantity":1,"state":0,"transferStatus":2}]}},"privacy":2},"characters":{"data":{"2305843009266804469":{"baseCharacterLevel":20,"characterId":"2305843009266804469","classHash":2271682572,"classType":2,"dateLastPlayed":"2017-09-19T17:38:25Z","emblemBackgroundPath":"/common/destiny2_content/icons/5d3d6d7803a89263e65a82f94645f12a.jpg","emblemHash":1409726988,"emblemPath":"/common/destiny2_content/icons/e1873a599da1e513e655288c49083024.jpg","genderHash":3111576190,"genderType":0,"levelProgression":{"currentProgress":146000,"dailyLimit":0,"dailyProgress":0,"level":20,"levelCap":20,"nextLevelAt":0,"progressToNextLevel":0,"progressionHash":1716568313,"stepIndex":20,"weeklyLimit":0,"weeklyProgress":0},"light":277,"membershipId":"4611686018437985950","membershipType":2,"minutesPlayedThisSession":"7","minutesPlayedTotal":"3302","percentToNextLevel":0,"raceHash":3887404748,"raceType":0,"stats":{"144602215":0,"1735777505":0,"1885944937":274,"1935470627":277,"1943323491":4,"209426660":50,"2762071195":150,"2837207746":40,"2996146975":5,"3555269338":28,"3897883278":0,"392767087":4,"3988418950":10,"4188031367":20,"4244567218":0,"925767036":60,"943549884":20}},"2305843009276930078":{"baseCharacterLevel":17,"characterId":"2305843009276930078","classHash":671679327,"classType":1,"dateLastPlayed":"2017-09-19T19:57:05Z","emblemBackgroundPath":"/common/destiny2_content/icons/e452c62485491a02fbc0e36f06d301d2.jpg","emblemHash":1907674138,"emblemPath":"/common/destiny2_content/icons/5dc023c8be5d682eae90be7f5d420f69.jpg","genderHash":2204441813,"genderType":1,"levelProgression":{"currentProgress":128155,"dailyLimit":0,"dailyProgress":0,"level":17,"levelCap":20,"nextLevelAt":7500,"progressToNextLevel":4655,"progressionHash":1716568313,"stepIndex":17,"weeklyLimit":0,"weeklyProgress":44148},"light":169,"membershipId":"4611686018437985950","membershipType":2,"minutesPlayedThisSession":"138","minutesPlayedTotal":"492","percentToNextLevel":62.06667,"raceHash":898834093,"raceType":2,"stats":{"144602215":0,"1735777505":0,"1885944937":169,"1935470627":169,"1943323491":2,"2996146975":5,"3555269338":100,"3897883278":0,"392767087":2,"4244567218":0}}},"privacy":1},"itemComponents":{"instances":{"data":{"6917529029450350536":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029455460308":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029486385746":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029491319675":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029491320624":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029501326294":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":1,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029501327596":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029780120309":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029860253747":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":281},"quality":6,"unlockHashesRequiredToEquip":[2166136261]},"6917529029885412905":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529029940911199":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":15,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030101194307":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030111373627":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030113982924":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":270},"quality":5,"unlockHashesRequiredToEquip":[919048791]},"6917529030134411823":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030136994796":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":260},"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030136995041":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":15,"isEquipped":false,"itemLevel":1,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":10},"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030458105822":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030460591676":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030570291815":{"canEquip":false,"cannotEquipReason":16,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":17,"isEquipped":false,"itemLevel":21,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":215},"quality":0,"unlockHashesRequiredToEquip":[3817088859]},"6917529030577924539":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":272},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529030577928259":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":16,"isEquipped":true,"itemLevel":21,"quality":9,"unlockHashesRequiredToEquip":[2166136261]},"6917529030577930550":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030580397896":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":18,"isEquipped":false,"itemLevel":22,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":227},"quality":2,"unlockHashesRequiredToEquip":[1368285237]},"6917529030595651415":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030598087096":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030665742639":{"canEquip":false,"cannotEquipReason":16,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":18,"isEquipped":false,"itemLevel":22,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":228},"quality":3,"unlockHashesRequiredToEquip":[3186775604]},"6917529030665750022":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":15,"isEquipped":false,"itemLevel":1,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030665751459":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":19,"isEquipped":false,"itemLevel":23,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":243},"quality":8,"unlockHashesRequiredToEquip":[2726639978]},"6917529030883254396":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"primaryStat":{"maximumValue":0,"statHash":1501155019,"value":150},"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030885900103":{"canEquip":false,"cannotEquipReason":16,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[1912493438]},"6917529030899106824":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":278},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529030917392754":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529030919870041":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":19,"isEquipped":false,"itemLevel":24,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":249},"quality":9,"unlockHashesRequiredToEquip":[1299354384]},"6917529030935116680":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":25,"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529031073554499":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"primaryStat":{"maximumValue":0,"statHash":1501155019,"value":140},"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529031101894041":{"canEquip":false,"cannotEquipReason":2,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":270},"quality":5,"unlockHashesRequiredToEquip":[2166136261]},"6917529031306795363":{"canEquip":true,"cannotEquipReason":0,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":278},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529031344224983":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529031364326780":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":277},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529031370823803":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":272},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529031400691391":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":281},"quality":6,"unlockHashesRequiredToEquip":[2166136261]},"6917529031601337990":{"canEquip":false,"cannotEquipReason":16,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":270},"quality":5,"unlockHashesRequiredToEquip":[2452843494]},"6917529031611065251":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529031846759552":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":270},"quality":5,"unlockHashesRequiredToEquip":[2166136261]},"6917529031850128260":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529031895802336":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":8,"unlockHashesRequiredToEquip":[2166136261]},"6917529031920392973":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":28,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":288},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529031920400532":{"canEquip":false,"cannotEquipReason":16,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":272},"quality":7,"unlockHashesRequiredToEquip":[1912493438]},"6917529031927800497":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":28,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":287},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529032179599002":{"canEquip":false,"cannotEquipReason":16,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":28,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":282},"quality":2,"unlockHashesRequiredToEquip":[919048791]},"6917529032179600705":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":28,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":290},"quality":5,"unlockHashesRequiredToEquip":[2166136261]},"6917529032189809646":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032192081173":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":271},"quality":1,"unlockHashesRequiredToEquip":[2166136261]},"6917529032195392652":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":277},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529032195393876":{"canEquip":false,"cannotEquipReason":16,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":281},"quality":6,"unlockHashesRequiredToEquip":[3817088859]},"6917529032195396637":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032386103272":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":270},"quality":5,"unlockHashesRequiredToEquip":[1302045394]},"6917529032393092777":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":26,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":270},"quality":5,"unlockHashesRequiredToEquip":[804231650]},"6917529032403453779":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":277},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529032410489115":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":279},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529032421002534":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529032421009158":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529032452382664":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":272},"quality":2,"unlockHashesRequiredToEquip":[1299354384]},"6917529032459537185":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":282},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529032466693537":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":274},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529032466698337":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":28,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":283},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529032466699534":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032473380322":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":278},"quality":3,"unlockHashesRequiredToEquip":[3817088859]},"6917529032608350313":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[3186775604]},"6917529032611782941":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[1810145619]},"6917529032614963383":{"canEquip":false,"cannotEquipReason":16,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2452843494]},"6917529032614967288":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2726639978]},"6917529032618314616":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2844913036]},"6917529032618320319":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[1661276197]},"6917529032621531995":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[3485532491]},"6917529032621535002":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2252206363]},"6917529032621536704":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[3817088859]},"6917529032621538957":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"primaryStat":{"maximumValue":0,"statHash":1501155019,"value":150},"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032621541703":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[1368285237]},"6917529032625045727":{"canEquip":false,"cannotEquipReason":16,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[919048791]},"6917529032625051380":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":278},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529032773711406":{"canEquip":false,"cannotEquipReason":16,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[1299354384]},"6917529032780817021":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529032784335204":{"canEquip":false,"cannotEquipReason":16,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[1912493438]},"6917529032784336606":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529032784340607":{"canEquip":false,"cannotEquipReason":16,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[3186775604]},"6917529032897178219":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032900346251":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032910904259":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":1,"isEquipped":true,"itemLevel":2,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032914352120":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":1,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032914356792":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529032914358776":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032914359355":{"canEquip":false,"cannotEquipReason":16,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":2,"isEquipped":false,"itemLevel":3,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":36},"quality":6,"unlockHashesRequiredToEquip":[3817088859]},"6917529032914361280":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032924744686":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":4,"isEquipped":false,"itemLevel":10,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":105},"quality":0,"unlockHashesRequiredToEquip":[318828292]},"6917529032938212092":{"canEquip":false,"cannotEquipReason":16,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":10,"isEquipped":false,"itemLevel":11,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":111},"quality":1,"unlockHashesRequiredToEquip":[1912493438]},"6917529032945166786":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032945169281":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032948321900":{"canEquip":true,"cannotEquipReason":0,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":11,"isEquipped":false,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":155},"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529032948327849":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":2,"isEquipped":false,"itemLevel":8,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":94},"quality":9,"unlockHashesRequiredToEquip":[318828292]},"6917529032955574852":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529032958975438":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033254328172":{"canEquip":false,"cannotEquipReason":16,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":273},"quality":3,"unlockHashesRequiredToEquip":[3817088859]},"6917529033258954291":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":28,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":284},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529033264059172":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":274},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529033380870637":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529033390766050":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033390767668":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529033390767669":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033390767793":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033390767794":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033390767795":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033455252337":{"canEquip":false,"cannotEquipReason":16,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":12,"isEquipped":false,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":155},"quality":5,"unlockHashesRequiredToEquip":[2166136261]},"6917529033455258652":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":273},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529033464452429":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":274},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529033464457087":{"canEquip":true,"cannotEquipReason":0,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":20,"isEquipped":true,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":274},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529033470921879":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529033470923766":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":true,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[2166136261]},"6917529033470927000":{"canEquip":true,"cannotEquipReason":0,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":9,"isEquipped":false,"itemLevel":13,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":133},"quality":3,"unlockHashesRequiredToEquip":[2166136261]},"6917529033470928474":{"canEquip":true,"cannotEquipReason":0,"damageType":2,"damageTypeHash":2303181850,"equipRequiredLevel":12,"isEquipped":false,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":155},"quality":5,"unlockHashesRequiredToEquip":[2166136261]},"6917529033470930274":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":20,"isEquipped":false,"itemLevel":27,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":279},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529033470930978":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033483704321":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":12,"isEquipped":true,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":157},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529033483707395":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":14,"isEquipped":true,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":152},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529033483708979":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033483709492":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":11,"isEquipped":false,"itemLevel":14,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":149},"quality":9,"unlockHashesRequiredToEquip":[2166136261]},"6917529033483711514":{"canEquip":false,"cannotEquipReason":16,"damageType":0,"equipRequiredLevel":12,"isEquipped":false,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":154},"quality":4,"unlockHashesRequiredToEquip":[2166136261]},"6917529033486456582":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":14,"isEquipped":true,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":176},"quality":6,"unlockHashesRequiredToEquip":[2166136261]},"6917529033486459500":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":13,"isEquipped":false,"itemLevel":14,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":149},"quality":9,"unlockHashesRequiredToEquip":[2166136261]},"6917529033486459946":{"canEquip":false,"cannotEquipReason":16,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":12,"isEquipped":false,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":157},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529033490012016":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":16,"isEquipped":true,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":171},"quality":1,"unlockHashesRequiredToEquip":[2166136261]},"6917529033490014894":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":13,"isEquipped":false,"itemLevel":16,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":169},"quality":9,"unlockHashesRequiredToEquip":[2166136261]},"6917529033490017610":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":12,"isEquipped":false,"itemLevel":15,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":157},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529033490020908":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033496213123":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]},"6917529033496213620":{"canEquip":true,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":14,"isEquipped":true,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":3897883278,"value":177},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529033496214860":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":16,"isEquipped":true,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":172},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529033496216189":{"canEquip":true,"cannotEquipReason":0,"damageType":1,"damageTypeHash":3373582085,"equipRequiredLevel":14,"isEquipped":true,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":177},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529033498990064":{"canEquip":true,"cannotEquipReason":0,"damageType":3,"damageTypeHash":1847026933,"equipRequiredLevel":16,"isEquipped":true,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":172},"quality":2,"unlockHashesRequiredToEquip":[2166136261]},"6917529033498991502":{"canEquip":true,"cannotEquipReason":0,"damageType":4,"damageTypeHash":3454344768,"equipRequiredLevel":14,"isEquipped":false,"itemLevel":17,"primaryStat":{"maximumValue":0,"statHash":1480404414,"value":177},"quality":7,"unlockHashesRequiredToEquip":[2166136261]},"6917529033656749484":{"canEquip":false,"cannotEquipReason":0,"damageType":0,"equipRequiredLevel":0,"isEquipped":false,"itemLevel":0,"quality":0,"unlockHashesRequiredToEquip":[0]}},"privacy":1}},"profileInventory":{"data":{"items":[{"bindStatus":0,"bucketHash":1469714392,"itemHash":3756389242,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":398376520,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":990304814,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":3803054958,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":685157383,"location":2,"lockable":false,"quantity":33,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":3825769808,"location":2,"lockable":false,"quantity":41,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":1305274547,"location":2,"lockable":false,"quantity":6,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":1277677855,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":494493680,"location":2,"lockable":false,"quantity":12,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":2014411539,"location":2,"lockable":false,"quantity":7,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":461171930,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":2640973641,"location":2,"lockable":false,"quantity":30,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":950899352,"location":2,"lockable":false,"quantity":7,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":1469714392,"itemHash":478751073,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":4131918931,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1536044846,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":821663312,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1795655559,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":4126105782,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1236762685,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":679334748,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1490143416,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3982556343,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":783402781,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3121111403,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":2782922115,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1501159137,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1003864149,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":2055297049,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3273542401,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":4117171521,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1281013978,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":2080321346,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":522105398,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3014957206,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1281013968,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1281013970,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":2531957774,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3140401233,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":366348795,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1580209121,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":344032858,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":4111635756,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":356155277,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1817627066,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3104313895,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":436269558,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1837294881,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":2273483223,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1796388032,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1024610936,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":1366943254,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3718031173,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":2451142299,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3363514990,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":680764635,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":3313201758,"itemHash":3728733956,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2657932159,"location":2,"lockable":false,"quantity":6,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2926662838,"location":2,"lockable":false,"quantity":15,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2926662832,"location":2,"lockable":false,"quantity":5,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1284563763,"location":2,"lockable":false,"quantity":8,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3205869477,"location":2,"lockable":false,"quantity":3,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3205869475,"location":2,"lockable":false,"quantity":3,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3921006355,"location":2,"lockable":false,"quantity":12,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1284563762,"location":2,"lockable":false,"quantity":6,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":4006192310,"location":2,"lockable":false,"quantity":36,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3205869473,"location":2,"lockable":false,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3205869485,"location":2,"lockable":false,"quantity":6,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":4006192311,"location":2,"lockable":false,"quantity":23,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1284563761,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2657932156,"location":2,"lockable":false,"quantity":9,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2926662835,"location":2,"lockable":false,"quantity":6,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3921006352,"location":2,"lockable":false,"quantity":8,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1284563765,"location":2,"lockable":false,"quantity":3,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2737886288,"location":2,"lockable":false,"quantity":4,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":4006192308,"location":2,"lockable":false,"quantity":7,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1284563766,"location":2,"lockable":false,"quantity":3,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":700322570,"location":2,"lockable":false,"quantity":3,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":223308216,"location":2,"lockable":false,"quantity":9,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3875413893,"location":2,"lockable":false,"quantity":9,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1051938199,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2307426898,"location":2,"lockable":false,"quantity":8,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":2737886290,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3403116793,"location":2,"lockable":false,"quantity":8,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":3403116794,"location":2,"lockable":false,"quantity":8,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1051938196,"location":2,"lockable":false,"quantity":6,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":700322568,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":1284563774,"location":2,"lockable":false,"quantity":3,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":2973005342,"itemHash":346878930,"location":2,"lockable":false,"quantity":2,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1508896098,"itemInstanceId":"6917529030665742639","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":2860172148,"itemInstanceId":"6917529032621536704","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1245809813,"itemInstanceId":"6917529032948327849","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":2782999717,"itemInstanceId":"6917529030580397896","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":2523259393,"itemInstanceId":"6917529030665751459","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1291586825,"itemInstanceId":"6917529032179599002","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1035680665,"itemInstanceId":"6917529032393092777","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":419976110,"itemInstanceId":"6917529032386103272","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":653875714,"itemInstanceId":"6917529032614963383","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1995011456,"itemInstanceId":"6917529032618320319","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":2937068650,"itemInstanceId":"6917529032611782941","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3508205736,"itemInstanceId":"6917529032618314616","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":372212741,"itemInstanceId":"6917529032608350313","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1500704923,"itemInstanceId":"6917529032614967288","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":467612864,"itemInstanceId":"6917529032621531995","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":4174481098,"itemInstanceId":"6917529032452382664","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1885753223,"itemInstanceId":"6917529031920400532","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":4124984448,"itemInstanceId":"6917529032195393876","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1513927136,"itemInstanceId":"6917529032625045727","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3666954563,"itemInstanceId":"6917529032621535002","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3629447000,"itemInstanceId":"6917529032621541703","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1885753223,"itemInstanceId":"6917529032784335204","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":287042892,"itemInstanceId":"6917529030919870041","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1447973650,"itemInstanceId":"6917529032773711406","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1245809812,"itemInstanceId":"6917529032924744686","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":2694044462,"itemInstanceId":"6917529032914359355","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3361694401,"itemInstanceId":"6917529032938212092","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3762467076,"itemInstanceId":"6917529033254328172","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":137879537,"itemInstanceId":"6917529032784340607","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1960218487,"itemInstanceId":"6917529030885900103","location":2,"lockable":true,"quantity":1,"state":1,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3336215727,"itemInstanceId":"6917529032473380322","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":3628991658,"itemInstanceId":"6917529030113982924","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":2145476623,"itemInstanceId":"6917529031601337990","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0},{"bindStatus":0,"bucketHash":138197802,"itemHash":1345867571,"itemInstanceId":"6917529030570291815","location":2,"lockable":true,"quantity":1,"state":0,"transferStatus":0}]},"privacy":2}},"ThrottleSeconds":0}');*/
    statusCallback.call(this, {status: "IN_PROGRESS", message: "matchItemsToDatabase"});
    
    var guardiansInventory = {};
    for(var guardianId in jsonResp.Response.characters.data) {
      guardiansInventory[guardianId] = {};
      // Guardian inventory
      guardiansInventory[guardianId].characterInventories = await matchItemsToManifest(
        jsonResp.Response.characterInventories.data[guardianId].items, 
        jsonResp.Response.itemComponents.instances.data,
      );
      // Guardian current equipment
      guardiansInventory[guardianId].characterEquipment = await matchItemsToManifest(
        jsonResp.Response.characterEquipment.data[guardianId].items, 
        jsonResp.Response.itemComponents.instances.data,
      );
    }
    // Profile level inventory (vault, consumables ...)
    // This one is sorted by current bucket + item bucket (ie : vault > kineticWeapon)
    var profileInventoryNotGrouped = await matchItemsToManifest(
      jsonResp.Response.profileInventory.data.items, 
      jsonResp.Response.itemComponents.instances.data, 
    );
    var profileInventory = {};
    var profileInventoryKeys = Object.keys(profileInventoryNotGrouped);
    for (var i = profileInventoryKeys.length - 1; i >= 0; i--) {
      profileInventory[profileInventoryKeys[i]] = _.groupBy(
        profileInventoryNotGrouped[profileInventoryKeys[i]],
        groupByBucketType
      );
    }
    
    statusCallback.call(this, {
      status: 'SUCCESS',
      data: {
        profileInventory: profileInventory,
        guardiansInventory: guardiansInventory,
        guardians: jsonResp.Response.characters.data
      },
      message: "guardiansItemsFetched"
    });
  } catch (error) {
      Message.error("[INVENTORY] Error While fetching all profile data from Bungie");
      Message.error(error);
      throw new LLException(42, error, 'inventoryException')
  }
}

async function matchItemsToManifest(accountItems, instanceItems, groupCallback = groupByCurrentBucket) {
  try {
    var hashMap = {};
    var output = {};
    for (var i = accountItems.length - 1; i >= 0; i--) {
      hashMap['@ManifestStore:Manifest.item.' + accountItems[i].itemHash] = accountItems[i];
    }
    var manifestItems = await Store.getManifestItems(Object.keys(hashMap));
    var itemsCollection = [];
    var itemManifest;
    var itemInventory;
    for (var i = manifestItems.length - 1; i >= 0; i--) {
      itemManifest = JSON.parse(manifestItems[i][1]);
      itemInventory = hashMap[manifestItems[i][0]];
      if (itemInventory.itemInstanceId && instanceItems[itemInventory.itemInstanceId]) {
        output[itemManifest.hash] = Object.assign({}, itemInventory, itemManifest, instanceItems[itemInventory.itemInstanceId]);
      } else {
        output[itemManifest.hash] = Object.assign({}, itemInventory, itemManifest);
      }
    }
    var list =  _.groupBy(output, groupCallback);
    return list;
  } catch (error) {
    Message.error("[INVENTORY] Error While matching data between manifest and inventory");
    Message.error(error);
    throw new LLException(43, error, 'inventoryException')
  }
}

function groupByCurrentBucket(item) {
  return item.bucketHash ? item.bucketHash : '';
}

function groupByBucketType(item) {
  return item.inventory && item.inventory.bucketTypeHash ? item.inventory.bucketTypeHash : '';
}
